const fs = require('fs');
const { ethers } = require("hardhat");

const Package_payload="0x1b9003e32585f1b274289ce7ae610119a96859d3022f4ff8a2d69c98e5e55086b377cc3fa151d967c48c9b57bd719808c44e6733038e66f22657a99019aa0464a2cc10537a6e459a997db843f87d8e9e0ae8a8006519c0913bd3d06350dcf159427aa1ccaba708559a7129e0f625d14606646df9e3e1f94de3ce85a2c5638ec7974232a15058c5d2ac1a45bef2e67b21c55d6213bd6d80fdb9542a9f96c2cbc96e2852eb5fecbca13b4220a7fee4e269b5d44f5f9b764bee50d650785f34ef1698eec336f9a6b3697a073feb7549bacc69c02a5bba55dfab1b7d71da1611dccf96a8efc434e063e6362f333c6134d680bb618790a88ba86e9d2a1aff1495c1af71faf46d3091d1387754a487c7f9b1bc8d0e78ffda6c0d9d9265f338ffa1550aa57c43aeca8271d298c8a70f5d05ccc4a78205f096b1192ff65601afb06d28c3a2deebd6b62fae2ad4612820af8f26749c7ce066ea4d2b981d8eb83653387ff1ad551bf3646618493550a6c6ddabdf22b677f77501e4ff86acf32c1f6c1172db15411b1fd05a76058ce13ddb02af06e8c75cf2b1d3c69bcb0af8d2946451eca9b53daaea46897da5cf8c628291719283eadfc32fae5d167b755b10e911b97f98669ec434a8de3ce77ef4e9bdebf6db4996dcb603d11b349e39a600cee95233ce06886c4d1275f58becca79bf78760f33651c08912ce4bfe2bc19008103c3b5d5a20d2705cf85329fd67888e4dbfd92ae26b7d241e82524f0fc932f7d0621809302a05e1aad4e3207b6567e8b48e984b88916d9c8addca8d632ac020cb078d1a0b0f1be57bad177a343f0335f22555fc93057db3c1b9c122e4511954f8c79f73fac74ddfca0315712f596f800f3ab66c6bfbe925ca6664f5a26d3b3f58772bfd34f0d8c518c9788b1f563bcbb7caa7362";
const header_payload="0x0000000000000000000000000000000000000000000000000000000000000558677265656e6669656c645f313031372d31000000000000000000000000000000000000000007596625b88f6ce19ad67de28b2dcca2eb59f316bdaed4e99eb7c4d3fb4f4cf59641fee139c29f889cce200de9e073b242c7c240e9b45f1ba92be8ca815b8345f17f1600000000000003e8e144b8627860d3415e413270f02707ca632dc443a932ac99412f035226dc0748f324364dac615d8022dcde79b8e4b5413e9555e0b3e6d09916f41d0c77a9760c9f786e369b4f7216e31e16ccd653bb78491611307f82d36a75cd725be5ac65eaf980ffa400000000000003e823e774ae66a074f49245c4e9c76e6ea24bae431b974232a15058c5d2ac1a45bef2e67b21c55d6213bd6d80fdb9542a9f96c2cbc96e2852eb5fecbca13b4220a7fee4e2694d5ee37c2b16b5cf24a1cc48e89103d29f204a09173e9ddc87842fd01aea69c700000000000003e8a800cd1039cef2817913f8b6a6ae5aeeb94f7291b5d44f5f9b764bee50d650785f34ef1698eec336f9a6b3697a073feb7549bacc69c02a5bba55dfab1b7d71da1611dccf4d53e2e86ba7ed4900c05e05e909247fe0f90316c521cca410ac010b440c549600000000000003e80c62ba9819e426fbe1c2d3dddf2d504eef78bfeb956707b850920b24867e9c9a97c972addcb6bae02493b022b65098fb54b7fbeea40b3812bd9a0c8e9e25d18aed2362e3b8af4a2db9baf7f9e219a370d535f211677d4d7fee75c88bd51ec1e69fd50fac00000000000003e8c36db5f165b6870cf6dd1a3569f9f17ed83a27e58d0e78ffda6c0d9d9265f338ffa1550aa57c43aeca8271d298c8a70f5d05ccc4a78205f096b1192ff65601afb06d28c385c5eb97bc1802c9ba0c70ce2ab4f95187aa70f79c5b35ff62c2d877efe6297f00000000000003e814cfe3777565d942f7a3e1d1dcffd7945170c8fea2deebd6b62fae2ad4612820af8f26749c7ce066ea4d2b981d8eb83653387ff1ad551bf3646618493550a6c6ddabdf221c2349fae25b51493d91817fe1604628030255ea77b315a124a219cdfc85649d00000000000003e88ccf50a90a9a917709bc800e627dc34924aef9a2b677f77501e4ff86acf32c1f6c1172db15411b1fd05a76058ce13ddb02af06e8c75cf2b1d3c69bcb0af8d2946451eca90ddeb663611c837df54a2fed6ebdc492aa201589f9eeda732db190d4a722caae00000000000003e87af04d428544044896d99a70fa18354f89bd63b6b53daaea46897da5cf8c628291719283eadfc32fae5d167b755b10e911b97f98669ec434a8de3ce77ef4e9bdebf6db49db281040d6b6c8099d73a2ed4fd6a71425a8bda7687b474f2b8f59c4ac67ff2300000000000003e84d576649d6caab609fdca92df4f93e6b34ce616e96dcb603d11b349e39a600cee95233ce06886c4d1275f58becca79bf78760f33651c08912ce4bfe2bc19008103c3b5d5acb5a8f4c2a3a87405124c86470e6bf0428da0d6a18e026bb81a01491abefc4100000000000003e8406b23e5b9cb00423db2b636bfa51b1cce1e482ea20d2705cf85329fd67888e4dbfd92ae26b7d241e82524f0fc932f7d0621809302a05e1aad4e3207b6567e8b48e984b84ec641128323e41b9d031775c65fc16cfb1e675e8adc5355bf349e44665bc21100000000000003e893b251c895f133ceb28696acfba0e1f4d5ffbcb28916d9c8addca8d632ac020cb078d1a0b0f1be57bad177a343f0335f22555fc93057db3c1b9c122e4511954f8c79f73f8c03165d37ede71e25f7736c9845c4402ba0792c0c439c960f7b716f4b723c9d00000000000003e812d720c8241c209079ef1ba820aaed097f67a427ac74ddfca0315712f596f800f3ab66c6bfbe925ca6664f5a26d3b3f58772bfd34f0d8c518c9788b1f563bcbb7caa73620a8d0f0adb030a02080b1211677265656e6669656c645f313031372d3118ac9f2a220c0889e7e4a906108684a5c3012a480a20e1cdb6ad4ac18dead2f5db038a41e0f98c3bc766fcb254cb26d389dba21b6c7612240801122007c13e2881eaf4aa193c10a02b838b1639d1bc9408b20a9ecfa0a1c4d86eb98132203c170556dc1ed9123e9d105748b904e4f3a5edc312b2e22d4561858e44dd8e113a20e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b85542201934cd5af1b1a6ec756032f07411f2452ccaea94d1bbeb5001484ca70d16e1d24a201934cd5af1b1a6ec756032f07411f2452ccaea94d1bbeb5001484ca70d16e1d2522016003c08cd29582728d8e62af2903db6e925557f1b98798c5764ac763df55b815a2059425c12dfac2b601fb1f3917177569a862b1efc59751a2541c532085d06e77262207e51918c326c3c840c8a04c6bdc96908fa1b2f0b2b14ab25c03e59fe2f68ebad6a20e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b85572143f655f6518ad343d730676caadb6d41a031c00797a401246b54296b8ececdda18f4edea96b11f94c8dcf06a754a07f20fe665db938405eb19e59ef49f571486d86bfaef37ca0c8d695d7941bc9acb2bb778728450e0012ac0b08ac9f2a1a480a2017ac87c5ae1909a2c3bf64ad936f84078c5b8c051d778b20aa5f120831275643122408011220f63ef8af64a40a3a2219e203df336ff5715b84489bf95bd2fba5d687c87335d522670802121423246d81f530b781c5a263b6e862e3ff3ec62cc41a0b088ce7e4a90610e3ddc3202240ddc5c6d7a92c0a68e3cd9b77a286a1507db1b9a2ac9655253984072278f66c03cfc7e7409779d6026845c4235c7c30a1e67eceb4df2827fc29b90524beb0e60a22670802121433189ab6a3f523d0112e0440b3ae05dd2ef211e11a0b088ce7e4a90610fa97ec3a224078568f32b49165dd919dcccf9a29b7c857ec4d3513ab4041223d957363d04e69e0cd98d676436b8360dc3b886d3c752993483135f8baacd3ebbb38c5de60fa0e2267080212143f655f6518ad343d730676caadb6d41a031c00791a0b088ce7e4a9061099f3922022409e05a91936bfb98c4318ce05e96bee8fb6fd572bb9e3b787d607d98ba619d162030acb84e919fec98dfb81a7ed083ed201f2a5c8bf6d5ce73ff83bf9a5583f0e2268080312145f8f35ccb38359df2a14b8172d33db0764f725801a0c088ce7e4a90610ece580fe02224090457a8fc290372911f3dec6274eb52f41398576e36a95c824563f1af091852e7eae67cd414a8fd7742afe74631d8ee59156a1c8baac353fa574e7a9dce7d4032268080212146959af14655c1e49716df071cd4388d9ccbb0eb21a0c088be7e4a90610efdd88cf03224044624f16bdf759ac5abdc91c1d5ade824757c3bee55e1b78e066ab3f69dcf92c2c692e5001ec32a29e53c1842dbfc86e2283e002ed9c111a54f5c4b1d51403002268080212147597a154315b495e7a799a72daa31eabb1e6933a1a0c088be7e4a90610e1fde8da032240a2fe77c8c30509cd6543022c6be563c37138fd904fe9245b66e4f5c07bf3675e1ac31b4028c9b7678dc4ae56714c74bd134ae50270b2a26483bbe35c59bdc709226708021214807a295bdd99e60c4dfb60302fe32044a43ea4dd1a0b088ce7e4a90610befddd20224095c96abc056bc0d48a4ebabda8231183b39c2c86bebe6d883dd110effda3d48546976550a717099644052d2c4c23a5d56525e6a1bd836394cda293db7f9c4f0b2268080212148d87ca03c22c35638546bdaca1da4243edc76a031a0c088be7e4a90610b6b3b8cf0322404a6b5cb6bef3c60a6d354f876edf3c684882e96ef6be081693cd6a3704af242fabef093fe9b3f7a21e3611e2b7b18793f3569501235e3af79a8fbc0986640c0c226808021214c4b5b4dd4440a2d213956577eea348afaf3e660a1a0c088be7e4a906109198c3db0322409a4ee588805c5aa29fa0047b2b04562809007ca178b6d77784730e44959bd93d89011059c2d575ade6f8f7af3a55c06fdd082c5fbb6d6bc6079c89773755a303226808021214c738b66fb254c77b4e5c4c9c974e3a5422a061921a0c088be7e4a90610eab090cf03224077c77c37a8c9416a7bf8c854a1428fe889eac7eb75b42b91d5b075af1f8af6c172c9dcf18288b09454d0afd1277c0593aa39e4f622b241c09e7c378494d4b20f226808021214d3f16d68d94c65a55db818e3df970f97dc4314981a0c088be7e4a90610838e92db0322406a3c347a39d1c43c2eff2d5a3cd539ff0532e0546fe4e8ec40ce46063e83fb7da7872a0e990124351fe3cf2b548e251c5ed05aaa001cee8a9e68af55dbadd603226808021214e8d08461366320f47ac236e081d89b33826b67f61a0c088be7e4a906108cc3f5da03224030fcaffff9b5e2d72540fcb4319e67014138566640a950109f053df69c4d243f79423367601d4354c961367820bab0476a561b9708f44a273d87f64bfda0840d226808021214fd0716cc741a1280167ba6c1afa1779b8912eb0d1a0c088be7e4a90610a7e98ccf0322409fee0afaf953e361a37fbefe5c602a4ad4a3131b67fdf3b3240f8339d7777b95b49fb51bf45210a92d65ec2273bf1d798c3096a141460bc1b5f3547c9f0bc10112aa0f0a90010a1423246d81f530b781c5a263b6e862e3ff3ec62cc412220a20e139c29f889cce200de9e073b242c7c240e9b45f1ba92be8ca815b8345f17f1618e80720a0a2ffffffffffffff012a30a932ac99412f035226dc0748f324364dac615d8022dcde79b8e4b5413e9555e0b3e6d09916f41d0c77a9760c9f786e363214e144b8627860d3415e413270f02707ca632dc4430a88010a1433189ab6a3f523d0112e0440b3ae05dd2ef211e112220a209b4f7216e31e16ccd653bb78491611307f82d36a75cd725be5ac65eaf980ffa418e80720e8072a30974232a15058c5d2ac1a45bef2e67b21c55d6213bd6d80fdb9542a9f96c2cbc96e2852eb5fecbca13b4220a7fee4e269321423e774ae66a074f49245c4e9c76e6ea24bae431b0a88010a143f655f6518ad343d730676caadb6d41a031c007912220a204d5ee37c2b16b5cf24a1cc48e89103d29f204a09173e9ddc87842fd01aea69c718e80720e8072a30b5d44f5f9b764bee50d650785f34ef1698eec336f9a6b3697a073feb7549bacc69c02a5bba55dfab1b7d71da1611dccf3214a800cd1039cef2817913f8b6a6ae5aeeb94f72910a88010a145f8f35ccb38359df2a14b8172d33db0764f7258012220a201c0177943226d42a9aadd11b14f23eac082359d58541871ca01a17b9d8a0a99a18e80720e8072a3096a8efc434e063e6362f333c6134d680bb618790a88ba86e9d2a1aff1495c1af71faf46d3091d1387754a487c7f9b1bc3214ea7fd841924588a0951e77cda1ea73c73dec0b010a88010a146959af14655c1e49716df071cd4388d9ccbb0eb212220a204d53e2e86ba7ed4900c05e05e909247fe0f90316c521cca410ac010b440c549618e80720e8072a30956707b850920b24867e9c9a97c972addcb6bae02493b022b65098fb54b7fbeea40b3812bd9a0c8e9e25d18aed2362e332140c62ba9819e426fbe1c2d3dddf2d504eef78bfeb0a88010a147597a154315b495e7a799a72daa31eabb1e6933a12220a20b8af4a2db9baf7f9e219a370d535f211677d4d7fee75c88bd51ec1e69fd50fac18e80720e8072a308d0e78ffda6c0d9d9265f338ffa1550aa57c43aeca8271d298c8a70f5d05ccc4a78205f096b1192ff65601afb06d28c33214c36db5f165b6870cf6dd1a3569f9f17ed83a27e50a88010a14807a295bdd99e60c4dfb60302fe32044a43ea4dd12220a2085c5eb97bc1802c9ba0c70ce2ab4f95187aa70f79c5b35ff62c2d877efe6297f18e80720e8072a30a2deebd6b62fae2ad4612820af8f26749c7ce066ea4d2b981d8eb83653387ff1ad551bf3646618493550a6c6ddabdf22321414cfe3777565d942f7a3e1d1dcffd7945170c8fe0a88010a148d87ca03c22c35638546bdaca1da4243edc76a0312220a201c2349fae25b51493d91817fe1604628030255ea77b315a124a219cdfc85649d18e80720e8072a30b677f77501e4ff86acf32c1f6c1172db15411b1fd05a76058ce13ddb02af06e8c75cf2b1d3c69bcb0af8d2946451eca932148ccf50a90a9a917709bc800e627dc34924aef9a20a88010a14c4b5b4dd4440a2d213956577eea348afaf3e660a12220a200ddeb663611c837df54a2fed6ebdc492aa201589f9eeda732db190d4a722caae18e80720e8072a30b53daaea46897da5cf8c628291719283eadfc32fae5d167b755b10e911b97f98669ec434a8de3ce77ef4e9bdebf6db4932147af04d428544044896d99a70fa18354f89bd63b60a88010a14c738b66fb254c77b4e5c4c9c974e3a5422a0619212220a20db281040d6b6c8099d73a2ed4fd6a71425a8bda7687b474f2b8f59c4ac67ff2318e80720e8072a3096dcb603d11b349e39a600cee95233ce06886c4d1275f58becca79bf78760f33651c08912ce4bfe2bc19008103c3b5d532144d576649d6caab609fdca92df4f93e6b34ce616e0a88010a14d3f16d68d94c65a55db818e3df970f97dc43149812220a20acb5a8f4c2a3a87405124c86470e6bf0428da0d6a18e026bb81a01491abefc4118e80720e8072a30a20d2705cf85329fd67888e4dbfd92ae26b7d241e82524f0fc932f7d0621809302a05e1aad4e3207b6567e8b48e984b83214406b23e5b9cb00423db2b636bfa51b1cce1e482e0a88010a14e8d08461366320f47ac236e081d89b33826b67f612220a204ec641128323e41b9d031775c65fc16cfb1e675e8adc5355bf349e44665bc21118e80720e8072a308916d9c8addca8d632ac020cb078d1a0b0f1be57bad177a343f0335f22555fc93057db3c1b9c122e4511954f8c79f73f321493b251c895f133ceb28696acfba0e1f4d5ffbcb20a88010a14fd0716cc741a1280167ba6c1afa1779b8912eb0d12220a208c03165d37ede71e25f7736c9845c4402ba0792c0c439c960f7b716f4b723c9d18e80720e8072a30ac74ddfca0315712f596f800f3ab66c6bfbe925ca6664f5a26d3b3f58772bfd34f0d8c518c9788b1f563bcbb7caa7362321412d720c8241c209079ef1ba820aaed097f67a4271290010a1423246d81f530b781c5a263b6e862e3ff3ec62cc412220a20e139c29f889cce200de9e073b242c7c240e9b45f1ba92be8ca815b8345f17f1618e80720a0a2ffffffffffffff012a30a932ac99412f035226dc0748f324364dac615d8022dcde79b8e4b5413e9555e0b3e6d09916f41d0c77a9760c9f786e363214e144b8627860d3415e413270f02707ca632dc443";
//opbnb mainnet TestPrecompiledContract：0x7aEa2aab3177661f8BAe7585f3fd126bB037deca
//opbnb testnet TestPrecompiledContract：0x1EeE6C1901793Eac298D07Fe61F6015a1E77b4fe
const contractAddress = "0x7aEa2aab3177661f8BAe7585f3fd126bB037deca"; // 替换为实际的合约地址

async function deployTestPrecompiledContract() {
    const [owner] = await ethers.getSigners();
    chainId = await owner.getChainId()
    console.log('owner addr: ' + owner.address)

    let PrecompiledContract = await ethers.getContractFactory('TestPrecompiledContract');
    let precompiledContract = await PrecompiledContract.deploy();
    await precompiledContract.deployed();
    console.log(precompiledContract.address);

    const verifyPackageResult = await precompiledContract.verifyPackage(Package_payload);
    console.log('verifyPackage result:', verifyPackageResult);
    const verifyHeaderResult = await precompiledContract.verifyHeader(header_payload);
    console.log('verifyHeader result:', verifyHeaderResult);

}

async function callVerifyPackage() {

    const TestPrecompiledContract = await ethers.getContractFactory("TestPrecompiledContract");
    const precompiledContract = TestPrecompiledContract.attach(contractAddress);

    const verifyPackageResult = await precompiledContract.verifyPackage(Package_payload);
    console.log('verifyPackage result:', verifyPackageResult);
    const verifyHeaderResult = await precompiledContract.verifyHeader(header_payload);
    console.log('verifyHeader result:', verifyHeaderResult);
}

const main = async () => {
    // await deployTestPrecompiledContract()
    await callVerifyPackage()
}  // main


main()
    .then(() => process.exit(0))
    .catch((error) => {
        console.error(error);
        process.exit(1);
    });
